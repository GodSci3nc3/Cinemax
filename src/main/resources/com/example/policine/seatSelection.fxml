<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.effect.*?>

<AnchorPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.example.policine.controllers.SeatSelectionController"
            prefHeight="700.0" prefWidth="1200.0"
            style="-fx-background-color: #1a1a2e;">

    <!-- Header Section -->
    <VBox fx:id="headerSection" AnchorPane.topAnchor="0.0" AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0"
          style="-fx-background-color: linear-gradient(to bottom, #16213e, #1a1a2e);" prefHeight="130.0">
        <effect>
            <DropShadow radius="10.0" offsetY="5.0" color="#00000030"/>
        </effect>

        <HBox alignment="CENTER_LEFT" spacing="20.0">
            <padding>
                <Insets top="15.0" bottom="5.0" left="30.0" right="30.0" />
            </padding>

            <!-- Logo and Back Button Container -->
            <HBox alignment="CENTER_LEFT" spacing="20.0">
                <ImageView fx:id="logoImage" fitHeight="40.0" fitWidth="120.0" preserveRatio="true">
                    <image>
                        <Image url="@../../../images/logo.png" />
                    </image>
                </ImageView>

                <Button fx:id="btnVolver" text="← Volver"
                        style="-fx-background-color: rgba(255,255,255,0.1); -fx-text-fill: #ffffff; -fx-border-color: rgba(255,255,255,0.2); -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 10 20; -fx-font-size: 13px;"
                        onAction="#volverAtras">
                    <effect>
                        <DropShadow radius="5.0" offsetY="2.0" color="#00000040"/>
                    </effect>
                </Button>
            </HBox>

            <!-- Spacer -->
            <Region HBox.hgrow="ALWAYS"/>

            <!-- Header Info -->
            <VBox alignment="CENTER_RIGHT" spacing="2.0">
                <Label text="SELECCIÓN DE ASIENTOS" textFill="#888888" style="-fx-font-size: 11px; -fx-font-weight: bold; -fx-letter-spacing: 1px;"/>
                <Label text="Paso 2 de 4" textFill="#4a90e2" style="-fx-font-size: 10px;"/>
            </VBox>
        </HBox>

        <VBox alignment="CENTER" spacing="5.0">
            <padding>
                <Insets top="10.0" bottom="15.0"/>
            </padding>

            <Label fx:id="lblTituloPelicula" text="El Viaje del Héroe" textFill="#ffffff">
                <font>
                    <Font name="System Bold" size="26.0" />
                </font>
                <effect>
                    <DropShadow radius="3.0" offsetY="1.0" color="#00000060"/>
                </effect>
            </Label>

            <Label fx:id="lblDetallesFuncion" text="19:45 • Sala 2 • Hoy" textFill="#aaaaaa">
                <font>
                    <Font size="14.0" />
                </font>
            </Label>
        </VBox>
    </VBox>

    <!-- Main Content Container -->
    <HBox fx:id="mainContent" AnchorPane.topAnchor="130.0" AnchorPane.leftAnchor="30.0" AnchorPane.rightAnchor="30.0"
          AnchorPane.bottomAnchor="30.0" spacing="35.0">

        <!-- Left Section - Screen and Seats -->
        <VBox fx:id="seatsSection" prefWidth="750.0" spacing="25.0">

            <!-- Screen Container -->
            <VBox alignment="CENTER" spacing="12.0">
                <VBox alignment="CENTER" spacing="5.0">
                    <Region prefHeight="45.0" prefWidth="620.0"
                            style="-fx-background-color: linear-gradient(to bottom, #444444, #111111); -fx-background-radius: 25; -fx-border-color: #333; -fx-border-width: 1; -fx-border-radius: 25;">
                        <effect>
                            <InnerShadow radius="8.0" color="#00000080"/>
                        </effect>
                    </Region>
                    <Label text="PANTALLA" textFill="#777777" style="-fx-font-size: 12px; -fx-font-weight: bold; -fx-letter-spacing: 2px;"/>
                </VBox>
            </VBox>

            <!-- Seats Grid Container -->
            <VBox fx:id="seatsContainer" spacing="12.0" alignment="CENTER">
                <GridPane fx:id="seatsGrid" hgap="6.0" vgap="6.0" alignment="CENTER">
                    <effect>
                        <DropShadow radius="15.0" offsetY="5.0" color="#00000020"/>
                    </effect>
                </GridPane>
            </VBox>

            <!-- Enhanced Legend -->
            <VBox alignment="CENTER" spacing="15.0">
                <Label text="LEYENDA" textFill="#888888" style="-fx-font-size: 11px; -fx-font-weight: bold; -fx-letter-spacing: 1px;"/>

                <HBox alignment="CENTER" spacing="25.0">
                    <VBox alignment="CENTER" spacing="6.0">
                        <Button prefWidth="28.0" prefHeight="28.0"
                                style="-fx-background-color: #4a90e2; -fx-background-radius: 4; -fx-border-color: rgba(255,255,255,0.1); -fx-border-width: 1; -fx-border-radius: 4;">
                            <effect>
                                <DropShadow radius="3.0" offsetY="1.0" color="#00000040"/>
                            </effect>
                        </Button>
                        <Label text="Disponible" textFill="#cccccc" style="-fx-font-size: 10px; -fx-font-weight: bold;"/>
                    </VBox>

                    <VBox alignment="CENTER" spacing="6.0">
                        <Button prefWidth="28.0" prefHeight="28.0"
                                style="-fx-background-color: #e74c3c; -fx-background-radius: 4; -fx-border-color: rgba(255,255,255,0.1); -fx-border-width: 1; -fx-border-radius: 4;">
                            <effect>
                                <DropShadow radius="3.0" offsetY="1.0" color="#00000040"/>
                            </effect>
                        </Button>
                        <Label text="Seleccionado" textFill="#cccccc" style="-fx-font-size: 10px; -fx-font-weight: bold;"/>
                    </VBox>

                    <VBox alignment="CENTER" spacing="6.0">
                        <Button prefWidth="28.0" prefHeight="28.0"
                                style="-fx-background-color: #666666; -fx-background-radius: 4; -fx-border-color: rgba(255,255,255,0.1); -fx-border-width: 1; -fx-border-radius: 4;">
                            <effect>
                                <DropShadow radius="3.0" offsetY="1.0" color="#00000040"/>
                            </effect>
                        </Button>
                        <Label text="Ocupado" textFill="#cccccc" style="-fx-font-size: 10px; -fx-font-weight: bold;"/>
                    </VBox>

                    <VBox alignment="CENTER" spacing="6.0">
                        <Button prefWidth="28.0" prefHeight="28.0"
                                style="-fx-background-color: #f39c12; -fx-background-radius: 4; -fx-border-color: rgba(255,255,255,0.1); -fx-border-width: 1; -fx-border-radius: 4;">
                            <effect>
                                <DropShadow radius="3.0" offsetY="1.0" color="#00000040"/>
                            </effect>
                        </Button>
                        <Label text="Premium" textFill="#cccccc" style="-fx-font-size: 10px; -fx-font-weight: bold;"/>
                    </VBox>
                </HBox>
            </VBox>

        </VBox>

        <!-- Right Section - Enhanced Summary -->
        <VBox fx:id="summarySection" prefWidth="370.0" spacing="25.0"
              style="-fx-background-color: linear-gradient(to bottom, #16213e, #1a1a2e); -fx-background-radius: 15; -fx-padding: 30; -fx-border-color: rgba(255,255,255,0.05); -fx-border-width: 1; -fx-border-radius: 15;">
            <effect>
                <DropShadow radius="20.0" offsetY="8.0" color="#00000030"/>
            </effect>

            <!-- Summary Header -->
            <VBox spacing="5.0">
                <Label text="Resumen de Selección" textFill="#ffffff">
                    <font>
                        <Font name="System Bold" size="20.0" />
                    </font>
                </Label>
                <Separator style="-fx-background-color: rgba(255,255,255,0.1); -fx-pref-height: 1;"/>
            </VBox>

            <!-- Selected Seats Section -->
            <VBox spacing="15.0">
                <HBox alignment="CENTER_LEFT" spacing="8.0">
                    <Label text="Asientos Seleccionados" textFill="#ffffff">
                        <font>
                            <Font name="System Bold" size="15.0" />
                        </font>
                    </Label>
                    <Label fx:id="lblSelectedCount" text="(0)" textFill="#888888" style="-fx-font-size: 13px;"/>
                </HBox>

                <ScrollPane fx:id="selectedSeatsPane" prefHeight="180.0"
                            style="-fx-background: transparent; -fx-background-color: transparent; -fx-border-color: rgba(255,255,255,0.05); -fx-border-radius: 8; -fx-border-width: 1;">
                    <VBox fx:id="selectedSeatsContainer" spacing="10.0" style="-fx-padding: 10;"/>
                </ScrollPane>
            </VBox>

            <!-- Discount Section -->
            <VBox spacing="12.0">
                <Label text="Código de Descuento" textFill="#ffffff">
                    <font>
                        <Font name="System Bold" size="15.0" />
                    </font>
                </Label>

                <HBox spacing="10.0">
                    <TextField fx:id="txtCodigoDescuento" promptText="Ingresa tu código"
                               style="-fx-background-color: rgba(255,255,255,0.05); -fx-text-fill: white; -fx-prompt-text-fill: #888; -fx-border-color: rgba(255,255,255,0.1); -fx-border-radius: 8; -fx-background-radius: 8; -fx-padding: 10;"
                               HBox.hgrow="ALWAYS"/>
                    <Button fx:id="btnApplyDiscount" text="Aplicar"
                            style="-fx-background-color: #4a90e2; -fx-text-fill: white; -fx-background-radius: 8; -fx-padding: 10 15; -fx-font-weight: bold;"
                            onAction="#aplicarDescuentoManual">
                        <effect>
                            <DropShadow radius="3.0" offsetY="1.0" color="#00000040"/>
                        </effect>
                    </Button>
                </HBox>
            </VBox>

            <!-- Price Summary with better spacing -->
            <VBox spacing="12.0" style="-fx-background-color: rgba(255,255,255,0.02); -fx-background-radius: 10; -fx-padding: 20;">
                <HBox alignment="CENTER_LEFT">
                    <Label text="Subtotal:" textFill="#cccccc" style="-fx-font-size: 14px;" HBox.hgrow="ALWAYS"/>
                    <Label fx:id="lblSubtotal" text="0.00" textFill="#ffffff" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                </HBox>

                <HBox alignment="CENTER_LEFT">
                    <Label text="Descuento:" textFill="#cccccc" style="-fx-font-size: 14px;" HBox.hgrow="ALWAYS"/>
                    <Label fx:id="lblDescuento" text="-$0.00" textFill="#e74c3c" style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                </HBox>

                <Separator style="-fx-background-color: rgba(255,255,255,0.1); -fx-pref-height: 2;"/>

                <HBox alignment="CENTER_LEFT">
                    <Label text="Total:" textFill="#ffffff" style="-fx-font-size: 18px; -fx-font-weight: bold;" HBox.hgrow="ALWAYS"/>
                    <Label fx:id="lblTotal" text="0.00" textFill="#27ae60" style="-fx-font-size: 22px; -fx-font-weight: bold;"/>
                </HBox>
            </VBox>

            <!-- Enhanced Continue Button -->
            <VBox spacing="10.0">
                <Button fx:id="btnContinuar" text="CONTINUAR AL CARRITO" prefWidth="310.0" prefHeight="50.0"
                        style="-fx-background-color: linear-gradient(to right, #4a90e2, #27ae60); -fx-text-fill: white; -fx-background-radius: 25; -fx-font-weight: bold; -fx-font-size: 15px; -fx-border-color: rgba(255,255,255,0.1); -fx-border-width: 1; -fx-border-radius: 25;"
                        onAction="#continuarAlCarrito">
                    <effect>
                        <DropShadow radius="8.0" offsetY="3.0" color="#00000050"/>
                    </effect>
                </Button>

                <Label text="Siguiente: Selección de comida y bebidas" textFill="#888888" style="-fx-font-size: 10px;" alignment="CENTER"/>
            </VBox>

        </VBox>

    </HBox>

</AnchorPane>